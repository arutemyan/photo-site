# お絵描き機能UI/UX設計

## 全体レイアウト

### 管理インターフェース (`/admin/paint/`)
レスポンシブ対応のシングルページアプリケーション風レイアウト。

#### デスクトップレイアウト
```
┌─────────────────────────────────────────────────┐
│ ヘッダー (タイトル + 保存ボタン + メニュー)      │
├─────────────────┬───────────────────────────────┤
│ ツールバー       │ キャンバスエリア                 │
│                 │                               │
│ • ペン          │ ┌─────────────────────────┐   │
│ • 消しゴム      │ │                         │   │
│ • 選択          │ │        キャンバス        │   │
│ • スポイト      │ │                         │   │
│ • 拡大縮小      │ └─────────────────────────┘   │
│ • 回転          │                               │
│                 │ タイムラプスコントロール       │
│ カラーパレット  │ [◀◀ ▶️ ▶▶] [0:00/5:30]     │
├─────────────────┴───────────────────────────────┤
│ レイヤーパネル + 設定パネル                      │
│                                                 │
│ レイヤー1 [👁] 背景 ▶                          │
│ レイヤー2 [👁] 下書き ▶                        │
│ レイヤー3 [👁] 清書 ▶                          │
│ レイヤー4 [👁] 着色 ▶                          │
│                                                 │
│ ペン設定: 太さ[5] アンチエイリアス[✓]          │
│ 消しゴム設定: 太さ[10] アンチエイリアス[✗]     │
└─────────────────────────────────────────────────┘
```

#### モバイルレイアウト
```
┌─────────────────┐
│ ヘッダー          │
│ (ハンバーガーメニュー)│
├─────────────────┤
│ キャンバス          │
│                 │
│                 │
├─────────────────┤
│ ツールバー          │
│ (スワイプで切り替え) │
├─────────────────┤
│ レイヤーパネル      │
│ (折りたたみ可能)    │
└─────────────────┘
```

## コンポーネント詳細

### 1. ヘッダー
- **左側**: タイトル ("お絵描き")
- **中央**: ファイルメニュー (新規/開く/保存/エクスポート)
- **右側**: ユーザー情報 + ログアウト

#### メニュー項目
- 新規作成
- 開く (作品一覧ダイアログ)
- 保存
- 名前を付けて保存
- エクスポート (PNG/JPG)
- 設定
- ヘルプ

### 2. ツールバー
縦配置のアイコンベースツールバー。

#### 描画ツール
- **ペン** (🖊️): クリックで選択、ダブルクリックで設定
- **消しゴム** (🧽): 同上
- **選択** (⬜): 矩形選択
- **スポイト** (💧): 色取得
- **塗りつぶし** (🪣): 領域塗りつぶし

#### ビュー操作ツール
- **拡大** (🔍+): キャンバス拡大
- **縮小** (🔍-): キャンバス縮小
- **フィット** (📐): 画面にフィット
- **回転** (🔄): 90度回転 (視覚的)

#### 特殊ツール
- **元に戻す** (↶): 1ステップ戻る (履歴があれば有効化)
- **やり直し** (↷): 1ステップ進む (Redo可能なら有効化)
- **タイムラプス** (🎬): 記録開始/停止

### 3. キャンバスエリア
メインの描画領域。

#### 機能
- **グリッド表示**: オプションで表示/非表示
- **ルーラー**: 座標表示
- **ズームインジケーター**: 現在のズーム率表示
- **キャンバスサイズ表示**: 右下に WxH 表示

#### インタラクション
- **ドラッグ**: キャンバス移動 (スペースキー+ドラッグ)
- **ホイール**: ズームイン/アウト
- **右クリック**: コンテキストメニュー (元に戻す/コピー等)

### 4. カラーパレット
16色 + 拡張色選択。

#### レイアウト
```
プリセット選択: [デフォルト ▼]
┌───┬───┬───┬───┐
│   │   │   │   │  ← 16色パレット
├───┼───┼───┼───┤
│   │   │   │   │
└───┴───┴───┴───┘
[+] 色追加

拡張色: ████████ (カラーピッカー)
```

#### プリセット
- デフォルト (モノクロ + 基本色)
- 暖色系
- 寒色系
- パステル
- ビビッド

### 5. レイヤーパネル
4レイヤーの管理。

#### 各レイヤー項目
```
[👁] [背景 ▼] ▶ [不透明度: 100%]
```

- **👁**: 可視性トグル
- **名前**: クリックで編集
- **▶**: レイヤー設定メニュー
  - 名前の変更
  - 不透明度の変更
  - レイヤーの複製
  - レイヤーの削除 (4レイヤー固定なので無効)

#### レイヤー順序
- ドラッグ&ドロップで順序変更
- 上のレイヤーが前面に表示

### 6. 設定パネル
ツールごとの詳細設定。

#### ペン設定
```
ペン設定
├── 太さ: [1-50] スライダー
├── 色: ████████ (現在選択色)
├── アンチエイリアス: [✓]
└── 不透明度: [0-100%]
```

#### 消しゴム設定
```
消しゴム設定
├── 太さ: [1-100] スライダー
├── アンチエイリアス: [✗]
└── 強度: [0-100%]
```

#### キャンバス設定
```
キャンバス設定
├── 幅: [1-4096] px
├── 高さ: [1-4096] px
├── 背景色: ████████
└── グリッド表示: [✓]
```

### 7. タイムラプスコントロール
キャンバス下部のコントロールバー。

#### コントロール
```
◀◀ ▶️ ▶▶ ││ □  [━━━━━━━●─────────]  0:00 / 5:30
```

- **◀◀**: 最初へ
- **▶️**: 再生/一時停止
- **▶▶**: 最後へ
- **││**: 一時停止
- **□**: 記録停止
- **スライダー**: シーク
- **時間**: 現在時間 / 総時間

#### 設定
- **容量制限**: [10-100] MB
- **自動保存**: [✓] 5分毎
- **圧縮レベル**: [1-9]

### 8. ダイアログ

#### 保存ダイアログ
```
作品を保存
├── タイトル: [テキスト入力]
├── ステータス: ○ 下書き ○ 公開
└── [保存] [キャンセル]
```

#### 開くダイアログ
作品一覧のグリッド表示。

#### 設定ダイアログ
アプリケーション全体の設定。

## 公開ビュー (`/paintview.php`)

### レイアウト
```
作品一覧 (グリッド)
┌───┬───┬───┐
│   │   │   │
│   │   │   │ ← サムネイル + タイトル
└───┴───┴───┘

クリックでオーバーレイ
┌─────────────────┐
│                 │
│    大きい画像    │ ← クリックで閉じる
│                 │
├─────────────────┤
│ ▶️ タイムラプス  │ ← クリックで再生
│ 0:00 / 5:30     │
└─────────────────┘
```

### 機能
- **グリッド表示**: レスポンシブグリッド
- **オーバーレイ**: 画像拡大表示
- **タイムラプス再生**: オーバーレイ内で再生
- **ページネーション**: 無限スクロール or ページング

## レスポンシブ対応

### ブレークポイント
- **デスクトップ**: > 1024px
- **タブレット**: 768px - 1023px
- **モバイル**: < 768px

### モバイル最適化
- **ツールバー**: 横スワイプ or ドロワー
- **レイヤーパネル**: アコーディオン
- **タッチ操作**: 指での描画対応
- **ジェスチャー**:
  - 2本指ピンチ: ズーム
  - 2本指回転: 回転
  - 長押し: コンテキストメニュー

## アクセシビリティ

### キーボード操作
- **Tab**: フォーカス移動
- **Enter/Space**: ボタン押下
- **矢印キー**: スライダー調整
- **Ctrl+Z**: 元に戻す (Undo)
- **Ctrl+Y** or **Ctrl+Shift+Z**: やり直し (Redo)
- **Ctrl+S**: 保存

### スクリーンリーダー
- **ラベル**: すべてのコントロールに適切なラベル
- **ランドマーク**: セクションごとにランドマーク指定
- **フォーカス**: 視覚的なフォーカスインジケーター

## ビジュアルデザイン

### カラースキーム
- **背景**: 薄いグレー (#F5F5F5)
- **パネル**: 白 (#FFFFFF) + 影
- **アクセント**: 青 (#007ACC)
- **ツール選択**: 強調色 (#FF6B35)

### タイポグラフィ
- **フォント**: システムフォント (Segoe UI, Roboto, etc.)
- **サイズ**: 14px ベース
- **行間**: 1.5

### アイコン
- **スタイル**: アウトラインボタン
- **サイズ**: 24x24px
- **一貫性**: 同じ機能に同じアイコン