# 検索仕様メモ

このファイルは `Tag::searchByName` に関する軽い設計メモです。

- 現在の設計方針（内部ツール向けの簡素化）:
  - `Tag::searchByName` は検索語に以下の文字を含む場合、検索を拒否して空配列を返します。
    - `%`（LIKE のワイルドカード）
    - `_`（LIKE のワイルドカード）
    - `\`（バックスラッシュ）

- 理由:
  - SQLite と MySQL の間で LIKE のエスケープや ESCAPE 句の扱いに差異があり、全ドライバで一貫した安全な実装を書くために複雑なドライバ別処理が必要になります。
  - 内部ツールかつ `%`/`_` を検索語に含めるユースケースはほとんど想定されないため、実装を簡素化して安全性を確保する選択を取りました。

- 注意点:
  - この仕様を外部ユーザー向けに公開する場合は、検索入力の制約をドキュメントに明示してください。
  - 将来的に `%`/`_` の検索サポートを追加する場合は、`Connection::getDriver()` を利用してドライバごとに適切な ESCAPE 処理を実装するか、LIKE を使わない検索方式に切り替える検討が必要です。
